

<div class="box no-border" st-table="vm.selectedEvent.guests" st-pipe="vm.searchGuests">
    <div class="box-header">
        <div class="row">
            <div class="col-md-12 col-sm-12">


                <span>
                    <button class="btn btn-primary" st-submit-search>
                        <i class="fa fa-search"></i> Search
                    </button>
                    <button class="btn btn-default" st-reset-search ng-model="vm.searchModel">Clear</button>
                </span>

                <span class="">

                    <button class="btn btn-default"
                            ng-class="{ 'btn-warning': vm.showWaiting, 'btn-default': !vm.showWaiting }"
                            ng-click="vm.toggleWaiting()">
                        <i class="fa fa-clock-o"></i> Waiting List
                    </button>
                    <button class="btn btn-default"
                            ng-class="{ 'btn-warning': vm.showMail, 'btn-default': !vm.showMail }"
                            ng-click="vm.toggleMail()">
                        <i class="fa fa-envelope"> </i> Send Tickets
                    </button>
                    <button class="btn btn-default"
                            ng-class="{ 'btn-warning': vm.showSent, 'btn-default': !vm.showSent }"
                            ng-click="vm.toggleSent()">
                        <i class="fa fa-paper-plane"></i> Tickets Sent
                    </button>

                </span>
                <span class="pull-right">
                    <button class="btn btn-default" uib-popover="New Guest" popover-trigger="mouseenter" ng-click="vm.createGuest()">
                        <i class="fa fa-plus-circle"></i>
                    </button>
                    <button class="btn" ng-click="vm.showGuestUpload()"><i class="fa fa-cloud-upload"></i> Upload</button>

                    <button class="btn btn-info" ng-click="vm.exportGuests()">
                        <i class="fa fa-download"></i>
                        Export
                    </button>

                </span>
            </div>
        </div>
    </div>
    <div class="box-body">
        <div class="row">
            <small>({{vm.searchModel.filteredCount}} / {{vm.searchModel.totalCount}}) Total Records</small>
            <span class="pull-right">
                <small>Page {{vm.searchModel.page}} of {{vm.searchModel.totalPages}}</small>
            </span>
            <table class="table table-striped table-bordered table-hover">

                <thead class="text-nowrap">
                    <tr>
                        <th st-sort="name">Name</th>
                        <th>Address</th>
                        <th st-sort="city">City</th>
                        <th st-sort="state" class="hidden-xs hidden-sm hidden-md">State</th>
                        <th st-sort="zipcode" class="hidden-xs hidden-sm hidden-md">Zipcode</th>
                        <th st-sort="ticketCount">Tickets</th>
                        <th st-sort="email" class="hidden-xs hidden-sm hidden-md">Email</th>
                        <th st-sort="phone" class="hidden-xs hidden-sm hidden-md">Phone</th>
                        <th st-sort="finderNumber">Finder Number</th>
                        <th st-sort="constituentType">Type</th>
                        <th st-sort="mailedDate" class="hidden-xs hidden-sm hidden-md">Mailed</th>
                        <th st-sort="responseDate" class="hidden-xs hidden-sm hidden-md">Responded</th>
                        <th class="hidden-xs hidden-sm hidden-md">Comments</th>
                        <th class="hidden-xs hidden-sm hidden-md">SPLC Comments</th>
                        <th></th>
                    </tr>
                    <tr>
                        <td><input type="text" st-clear-key ng-model="vm.searchModel.name" class="form-control" placeholder="Name" /></td>
                        <td><input type="text" st-clear-key ng-model="vm.searchModel.address" class="form-control" placeholder="Address" /></td>
                        <td><input type="text" st-clear-key ng-model="vm.searchModel.city" class="form-control" placeholder="City" /></td>
                        <td class="hidden-xs hidden-sm hidden-md"><input type="text" st-clear-key ng-model="vm.searchModel.state" class="form-control " placeholder="State" /></td>
                        <td class="hidden-xs hidden-sm hidden-md"><input type="text" st-clear-key ng-model="vm.searchModel.zipcode" class="form-control" placeholder="Zipcode" /></td>
                        <td><input type="text" st-clear-key ng-model="vm.searchModel.ticketCount" class="form-control" placeholder="Tickets" /></td>
                        <td class="hidden-xs hidden-sm hidden-md"><input type="text" st-clear-key ng-model="vm.searchModel.email" class="form-control " placeholder="Email" /></td>
                        <td class="hidden-xs hidden-sm hidden-md"><input type="text" st-clear-key ng-model="vm.searchModel.phone" class="form-control " placeholder="Phone" /></td>
                        <td><input type="text" st-clear-key ng-model="vm.searchModel.finderNumber" class="form-control" placeholder="Finder Number" /></td>
                        <td><input type="text" st-clear-key ng-model="vm.searchModel.constituentType" class="form-control" placeholder="Type" /></td>
                        <td class="hidden-xs hidden-sm hidden-md"></td>
                        <td class="hidden-xs hidden-sm hidden-md"></td>
                        <td class="text-center hidden-xs hidden-sm hidden-md"></td>
                        <td class="text-center hidden-xs hidden-sm hidden-md"></td>
                        <td>
                            <div class="pull-right">
                                <button class="btn btn-danger" ng-show="vm.showMail" ng-click="vm.mailAllTickets()"> <i class="fa fa-paper-plane"></i> Send All</button>
                               
                            </div>
                        </td>
                    </tr>
                </thead>
                <tbody>

                    <tr ng-repeat="g in vm.selectedEvent.guests">
                        <td>{{g.name}}</td>
                        <td>
                            <address>
                                {{g.address}}
                                <br>
                                {{g.address2}}<br>
                                {{g.address3}}
                            </address>
                        </td>
                        <td>{{g.city}}</td>
                        <td class="hidden-xs hidden-sm hidden-md">{{g.state}}</td>
                        <td class="hidden-xs hidden-sm hidden-md">{{g.zipcode}}</td>
                        <td class="text-center">{{g.ticketCount}}</td>
                        <td class="hidden-xs hidden-sm hidden-md">{{g.email}}</td>
                        <td class="hidden-xs hidden-sm hidden-md">{{g.phone}}</td>
                        <td>{{g.finderNumber}}</td>
                        <td>{{g.constituentType}}</td>
                        <td class="hidden-xs hidden-sm hidden-md">{{g.mailedDate | date :'MM/dd/yyyy'}}</td>
                        <td class="hidden-xs hidden-sm hidden-md">{{g.responseDate | date :'MM/dd/yyyy'}}</td>
                        <td class="text-center hidden-xs hidden-sm hidden-md">
                            <i ng-show="g.comment.length > 0" class="fa fa-comment" uib-popover="{{g.comment}}" popover-trigger="mouseenter"></i>
                        </td>
                        <td class="text-center hidden-xs hidden-sm hidden-md">
                            <i ng-show="g.splcComment.length > 0" class="fa fa-comment" uib-popover="{{g.splcComment}}" popover-trigger="mouseenter"></i>
                        </td>
                        <td>

                            <!-- Split button -->
                            <div>
                                <div id="long-button" class="btn-group" uib-dropdown>
                                    <button id="split-button" type="button" class="btn btn-primary" ng-click="g.primaryChoice.command(g)"><i ng-class="g.primaryChoice.icon"></i> <span>{{g.primaryChoice.name}}</span></button>
                                    <button type="button" class="btn btn-primary" uib-dropdown-toggle>
                                        <span class="caret"></span>
                                        <span class="sr-only">Split button</span>
                                    </button>
                                    <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">
                                        <li role="menuitem" ng-repeat="choice in g.choices">
                                            <a ng-click="choice.command(g)"><i ng-class="choice.icon"></i> {{choice.name}}</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>


                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="15" class="text-center">
                            <uib-pagination total-items="vm.searchModel.filteredCount"
                                            ng-model="vm.searchModel.page"
                                            ng-show="vm.searchModel.totalPages > 1"
                                            max-size="5"
                                            items-per-page="vm.searchModel.pageSize"
                                            class="pagination-sm"
                                            boundary-link-numbers="true"
                                            ng-change="vm.paged()"
                                            rotate="false">
                            </uib-pagination>
                        </td>
                    </tr>
                </tfoot>
            </table>

        </div>
    </div>
</div>
