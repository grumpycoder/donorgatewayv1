

<div class="box no-border">
    <div class="box-header">
        <button class="btn" ng-click="vm.showGuestUpload()"><i class="fa fa-cloud-upload"></i> Upload</button>

        <button class="btn btn-default" ng-class="{ 'btn-warning': vm.showWaiting, 'btn-default': !vm.showWaiting }" ng-click="vm.toggleWaiting()"> <i class="fa fa-clock-o"></i> Show Waiting List</button>
        <button class="btn btn-default" ng-class="{ 'btn-warning': vm.showMail, 'btn-default': !vm.showMail }" ng-click="vm.toggleMail()"> <i class="fa fa-envelope"></i> Show Send Tickets</button>
        <button class="btn btn-default" ng-class="{ 'btn-warning': vm.showSent, 'btn-default': !vm.showSent }" ng-click="vm.toggleSent()"> <i class="fa fa-paper-plane"></i> Show Tickets Sent</button>

        <span class="pull-right">
            <button class="btn btn-success" uib-popover="New Guest" popover-trigger="mouseenter" ng-click="vm.createGuest()">
                <i class="fa fa-plus-circle"></i>
            </button>

            <button class="btn btn-default" ng-click="vm.refreshGuests()">
                <i class="fa fa-refresh"></i>
                Refresh
            </button>
            <button class="btn btn-info" ng-click="vm.exportGuests()">
                <i class="fa fa-download"></i>
                Export
            </button>
        </span>

    </div>
    <div class="box-body">

        <table st-table="vm.selectedEvent.guests" st-pipe="vm.searchGuests" class="table table-striped table-bordered table-hover">

            <thead class="text-nowrap">
                <tr>
                    <th st-sort="name">Name</th>
                    <th>Address</th>
                    <th st-sort="city">City</th>
                    <th st-sort="state" class="hidden-xs hidden-sm hidden-md">State</th>
                    <th st-sort="zipcode" class="hidden-xs hidden-sm hidden-md">Zipcode</th>
                    <th st-sort="ticketCount">Tickets</th>
                    <th st-sort="email" class="hidden-xs hidden-sm hidden-md">Email</th>
                    <th st-sort="phone" class="hidden-xs hidden-sm hidden-md">Phone</th>
                    <th st-sort="finderNumber">Finder Number</th>
                    <th st-sort="donorType">Donor Type</th>
                    <th st-sort="mailedDate" class="hidden-xs hidden-sm hidden-md">Mailed</th>
                    <th st-sort="responseDate" class="hidden-xs hidden-sm hidden-md">Responded</th>
                    <th class="hidden-xs hidden-sm hidden-md">Comments</th>
                    <th></th>
                </tr>
                <tr>
                    <td><input type="search" st-search="name" class="form-control" placeholder="Name" /></td>
                    <td><input type="text" st-clear-key st-search="address" class="form-control" placeholder="Address" /></td>
                    <td><input type="text" st-clear-key st-search="city" class="form-control" placeholder="City" /></td>
                    <td class="hidden-xs hidden-sm hidden-md"><input type="text" st-clear-key st-search="state" class="form-control " placeholder="State" /></td>
                    <td class="hidden-xs hidden-sm hidden-md"><input type="text" st-clear-key st-search="zipcode" class="form-control" placeholder="Zipcode" /></td>
                    <td><input type="text" st-clear-key st-search="ticketCount" class="form-control" placeholder="Tickets" /></td>
                    <td class="hidden-xs hidden-sm hidden-md"><input type="text" st-clear-key st-search="email" class="form-control " placeholder="Email" /></td>
                    <td class="hidden-xs hidden-sm hidden-md"><input type="text" st-clear-key st-search="phone" class="form-control " placeholder="Phone" /></td>
                    <td><input type="text" st-clear-key st-search="finderNumber" class="form-control" placeholder="Finder Number" /></td>
                    <td><input type="text" st-clear-key st-search="donorType" class="form-control" placeholder="Donor Type" /></td>
                    <td class="hidden-xs hidden-sm hidden-md"></td>
                    <td class="hidden-xs hidden-sm hidden-md"></td>
                    <td class="text-center hidden-xs hidden-sm hidden-md">
                        <button class="btn btn-danger" ng-show="vm.showMail" ng-click="vm.mailAllTickets()"> <i class="fa fa-paper-plane"></i> Send All</button>
                    </td>
                    <td></td>
                </tr>
            </thead>
            <tbody>

                <tr ng-repeat="g in vm.selectedEvent.guests">
                    <td>{{g.name}}</td>
                    <td>
                        <address>
                            {{g.address}}
                            <br>
                            {{g.address2}}<br>
                            {{g.address3}}
                        </address>
                    </td>
                    <td>{{g.city}}</td>
                    <td class="hidden-xs hidden-sm hidden-md">{{g.state}}</td>
                    <td class="hidden-xs hidden-sm hidden-md">{{g.zipcode}}</td>
                    <td class="text-center">{{g.ticketCount}}</td>
                    <td class="hidden-xs hidden-sm hidden-md">{{g.email}}</td>
                    <td class="hidden-xs hidden-sm hidden-md">{{g.phone}}</td>
                    <td>{{g.finderNumber}}</td>
                    <td>{{g.donorType}}</td>
                    <td class="hidden-xs hidden-sm hidden-md">{{g.mailedDate | date :'MM/dd/yyyy'}}</td>
                    <td class="hidden-xs hidden-sm hidden-md">{{g.responseDate | date :'MM/dd/yyyy'}}</td>
                    <td class="text-center hidden-xs hidden-sm hidden-md">
                        <i ng-show="g.comment.length > 0" class="fa fa-comment" uib-popover="{{g.comment}}" popover-trigger="mouseenter"></i>
                    </td>
                    <td>
                       
                        <!-- Split button -->
                        <!--<div class="btn-group" uib-dropdown>
                            <button id="split-button" type="button" class="btn btn-danger" ng-click="vm.selectedAction.action(g)">
                                <i ng-class="vm.selectedAction.icon"></i>
                                {{vm.selectedAction.name}}
                            </button>
                            <button type="button" class="btn btn-danger" uib-dropdown-toggle>
                                <span class="caret"></span>
                                <span class="sr-only">Split button!</span>
                            </button>
                            <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button">

                                <li ng-repeat="c in vm.choices" role="menuitem">
                                    <a ng-click="c.action">
                                        <i ng-class="c.icon"></i>{{c.name}}
                                    </a>
                                </li>
                            </ul>
                        </div>-->


                        <div class="btn-group" uib-dropdown is-open="status.isopen">
                            <button id="single-button" type="button" class="btn btn-primary" uib-dropdown-toggle ng-disabled="disabled">
                                <i class="icon ion-flash"></i> Actions <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
                                <li role="menuitem" ng-hide="g.isAttending"><a ng-click="vm.registerGuest(g)"><i class="fa fa-key"></i> Register</a></li>
                                <li role="menuitem" ng-show="g.isAttending || g.isWaiting"><a ng-click="vm.cancelGuest(g)"><i class="fa fa-times-circle text-red"></i> Cancel</a></li>
                                <li role="menuitem" ng-show="g.isAttending"><a ng-click="vm.registerGuest(g)"><i class="fa fa-plus-circle"></i> Add Tickets</a></li>
                                <li class="divider"></li>
                                <li role="menuitem" ng-hide="g.isMailed || g.isWaiting"><a ng-click="vm.mailTicket(g)"><i class="icon ion-android-mail"></i> Mail Ticket</a></li>
                                <li role="menuitem" ng-show="g.isWaiting"><a ng-click="vm.addToMailQueue(g)"><i class="icon ion-clock"></i> Remove Waiting</a></li>
                            </ul>
                        </div>
                        <!--<button class="btn btn-block" ng-show="g.isWaiting" ng-click="vm.addToMailQueue(g)"><i class="fa fa-list"></i> Move to Send</button>
                        <button class="btn btn-block" ng-show="g.isAttending && !g.isMailed && !g.isWaiting" ng-click="vm.mailTicket(g)"><i class="icon ion-android-mail"></i> Send Ticket</button>
                        <button class="btn btn-block" ng-show="!g.isAttending && !g.isWaiting" ng-click="vm.registerGuest(g)"><i class="fa fa-key"></i> Register</button>
                        <div ng-show="g.isMailed" class="center-block text-center">
                            <span>
                                <i class="fa fa-check-circle fa-2x text-green" ng-click="vm.registerGuest(g)"></i>
                                <i class="fa fa-times-circle fa-2x text-red" ng-click="vm.cancelGuest(g)"></i>
                            </span>
                        </div>-->
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="14" class="text-center">
                        <uib-pagination total-items="vm.searchModel.filteredCount"
                                        ng-model="vm.searchModel.page"
                                        ng-show="vm.searchModel.totalPages > 1"
                                        max-size="5"
                                        items-per-page="vm.searchModel.pageSize"
                                        class="pagination-sm"
                                        boundary-link-numbers="true"
                                        ng-change="vm.paged()"
                                        rotate="false">
                        </uib-pagination>
                    </td>
                </tr>
            </tfoot>
        </table>


    </div>
</div>
